{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/linchian/Documents/GitHub/next-minmax/src/i18n/locale-cookie.ts"],"sourcesContent":["// TypeScript\n// src/i18n/locale-cookie.ts\nexport const NEXT_LOCALE_COOKIE = {\n    NAME: 'NEXT_LOCALE',\n    PATH: '/',\n    MAX_AGE_SECONDS: 60 * 60 * 24 * 180, // 180 天；與資料快取 TTL 無關\n    SAME_SITE: 'Lax' as const,\n    // 在 HTTPS 環境建議設為 true；本地可視情況調整\n    SECURE: typeof window !== 'undefined' ? window.location.protocol === 'https:' : true,\n};\n\nexport function buildNextLocaleCookie(value: string): string {\n    const parts = [\n        `${NEXT_LOCALE_COOKIE.NAME}=${encodeURIComponent(value)}`,\n        `Path=${NEXT_LOCALE_COOKIE.PATH}`,\n        `Max-Age=${NEXT_LOCALE_COOKIE.MAX_AGE_SECONDS}`,\n        `SameSite=${NEXT_LOCALE_COOKIE.SAME_SITE}`,\n    ];\n    if (NEXT_LOCALE_COOKIE.SECURE) parts.push('Secure');\n    return parts.join('; ');\n}"],"names":[],"mappings":"AAAA,aAAa;AACb,4BAA4B;;;;;AACrB,MAAM,qBAAqB;IAC9B,MAAM;IACN,MAAM;IACN,iBAAiB,KAAK,KAAK,KAAK;IAChC,WAAW;IACX,+BAA+B;IAC/B,QAAQ,sCAAgC,0BAAwC;AACpF;AAEO,SAAS,sBAAsB,KAAa;IAC/C,MAAM,QAAQ;QACV,GAAG,mBAAmB,IAAI,CAAC,CAAC,EAAE,mBAAmB,QAAQ;QACzD,CAAC,KAAK,EAAE,mBAAmB,IAAI,EAAE;QACjC,CAAC,QAAQ,EAAE,mBAAmB,eAAe,EAAE;QAC/C,CAAC,SAAS,EAAE,mBAAmB,SAAS,EAAE;KAC7C;IACD,IAAI,mBAAmB,MAAM,EAAE,MAAM,IAAI,CAAC;IAC1C,OAAO,MAAM,IAAI,CAAC;AACtB","debugId":null}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///Users/linchian/Documents/GitHub/next-minmax/src/i18n/routing.ts"],"sourcesContent":["import { defineRouting } from 'next-intl/routing';\n\nexport const routing = defineRouting({\n  // 支援的語系 - 這個會被 API 動態覆蓋\n  locales: ['zh-TW', 'zh-CN', 'en', 'ja'],\n  \n  // 預設語系 - 這個也會被 API 動態覆蓋\n  defaultLocale: 'zh-TW',\n  \n  // 預設語系不加前綴\n  localePrefix: 'as-needed',\n  \n  // 啟用語系檢測\n  localeDetection: true\n});\n"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,UAAU,CAAA,GAAA,kOAAA,CAAA,gBAAa,AAAD,EAAE;IACnC,wBAAwB;IACxB,SAAS;QAAC;QAAS;QAAS;QAAM;KAAK;IAEvC,wBAAwB;IACxB,eAAe;IAEf,WAAW;IACX,cAAc;IAEd,SAAS;IACT,iBAAiB;AACnB","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/linchian/Documents/GitHub/next-minmax/src/i18n/navigation.ts"],"sourcesContent":["import {createNavigation} from 'next-intl/navigation';\nimport {routing} from './routing';\n\n//這是在 Next.js 導航 API 基礎上，考量到路由設定的輕量級封裝。\nexport const {Link, redirect, usePathname, useRouter, getPathname} =\n    createNavigation(routing);\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;AAGO,MAAM,EAAC,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,SAAS,EAAE,WAAW,EAAC,GAC9D,CAAA,GAAA,8PAAA,CAAA,mBAAgB,AAAD,EAAE,sHAAA,CAAA,UAAO","debugId":null}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///Users/linchian/Documents/GitHub/next-minmax/src/features/language/components/LanguageSwitcher.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { usePathname, useSearchParams } from 'next/navigation';\nimport type { Language } from '@/types';\nimport { buildNextLocaleCookie } from '@/i18n/locale-cookie';\nimport { Link } from '@/i18n/navigation';\nimport { routing } from '@/i18n/routing';\n\n// Extended language type with additional properties\ntype ExtendedLanguage = Language & {\n    native?: string;\n    default?: boolean;\n    icon?: string;\n};\n\ntype LanguageSwitcherProps = {\n    className?: string;\n    languages: ExtendedLanguage[];\n};\n\nexport default function LanguageSwitcher({ className, languages }: LanguageSwitcherProps) {\n    const pathname = usePathname() || '/';\n    const searchParams = useSearchParams();\n\n    const supported = React.useMemo(() => new Set(routing.locales), []);\n    const hasLocalePrefix = React.useMemo(() => {\n        const parts = pathname.split('/').filter(Boolean);\n        const first = parts[0];\n        return !!first && supported.has(first as (typeof routing.locales)[number]);\n    }, [pathname, supported]);\n\n    // 取得「不含語系前綴」的路徑\n    const basePath = React.useMemo(() => {\n        const parts = pathname.split('/').filter(Boolean);\n        const withoutLocale = hasLocalePrefix ? parts.slice(1) : parts;\n        const path = `/${withoutLocale.join('/')}`;\n        return path === '' ? '/' : path;\n    }, [pathname, hasLocalePrefix]);\n\n    const qsString = searchParams?.toString();\n    const hrefWithQuery = React.useCallback(\n        (path: string) => (qsString ? `${path}?${qsString}` : path),\n        [qsString]\n    );\n\n    if (!languages || languages.length === 0) return null;\n\n    return (\n        <nav className={className} aria-label=\"Language switcher\">\n            <ul className=\"flex flex-wrap items-center gap-2\">\n                {languages.map((lang) => {\n                    const label = lang.native || lang.title;\n                    const isDefault = !!lang.default;\n                    const href = hrefWithQuery(basePath);\n\n                    return (\n                        <li key={lang.id}>\n                            <Link\n                                href={href}\n                                // 重點：無論是否預設，一律明確指定目標語系\n                                locale={lang.id as (typeof routing.locales)[number]}\n                                onClick={() => {\n                                    document.cookie = buildNextLocaleCookie(lang.id);\n                                }}\n                                className={\n                                    'inline-flex items-center gap-2 rounded px-3 py-1 text-sm ' +\n                                    (isDefault ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-800 hover:bg-gray-200')\n                                }\n                                aria-current={isDefault ? 'true' : undefined}\n                                title={lang.title}\n                            >\n                                {lang.icon ? (\n                                    <span aria-hidden=\"true\" className={`${lang.icon} inline-block h-4 w-4`} />\n                                ) : null}\n                                <span>{label}</span>\n                                {isDefault ? (\n                                    <span className=\"ml-1 rounded bg-blue-500/20 px-1.5 py-0.5 text-[10px]\">default</span>\n                                ) : null}\n                            </Link>\n                        </li>\n                    );\n                })}\n            </ul>\n        </nav>\n    );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AACA;AACA;AAPA;;;;;;;AAqBe,SAAS,iBAAiB,EAAE,SAAS,EAAE,SAAS,EAAyB;IACpF,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD,OAAO;IAClC,MAAM,eAAe,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IAEnC,MAAM,YAAY,qMAAA,CAAA,UAAK,CAAC,OAAO,CAAC,IAAM,IAAI,IAAI,sHAAA,CAAA,UAAO,CAAC,OAAO,GAAG,EAAE;IAClE,MAAM,kBAAkB,qMAAA,CAAA,UAAK,CAAC,OAAO,CAAC;QAClC,MAAM,QAAQ,SAAS,KAAK,CAAC,KAAK,MAAM,CAAC;QACzC,MAAM,QAAQ,KAAK,CAAC,EAAE;QACtB,OAAO,CAAC,CAAC,SAAS,UAAU,GAAG,CAAC;IACpC,GAAG;QAAC;QAAU;KAAU;IAExB,gBAAgB;IAChB,MAAM,WAAW,qMAAA,CAAA,UAAK,CAAC,OAAO,CAAC;QAC3B,MAAM,QAAQ,SAAS,KAAK,CAAC,KAAK,MAAM,CAAC;QACzC,MAAM,gBAAgB,kBAAkB,MAAM,KAAK,CAAC,KAAK;QACzD,MAAM,OAAO,CAAC,CAAC,EAAE,cAAc,IAAI,CAAC,MAAM;QAC1C,OAAO,SAAS,KAAK,MAAM;IAC/B,GAAG;QAAC;QAAU;KAAgB;IAE9B,MAAM,WAAW,cAAc;IAC/B,MAAM,gBAAgB,qMAAA,CAAA,UAAK,CAAC,WAAW,CACnC,CAAC,OAAkB,WAAW,GAAG,KAAK,CAAC,EAAE,UAAU,GAAG,MACtD;QAAC;KAAS;IAGd,IAAI,CAAC,aAAa,UAAU,MAAM,KAAK,GAAG,OAAO;IAEjD,qBACI,8OAAC;QAAI,WAAW;QAAW,cAAW;kBAClC,cAAA,8OAAC;YAAG,WAAU;sBACT,UAAU,GAAG,CAAC,CAAC;gBACZ,MAAM,QAAQ,KAAK,MAAM,IAAI,KAAK,KAAK;gBACvC,MAAM,YAAY,CAAC,CAAC,KAAK,OAAO;gBAChC,MAAM,OAAO,cAAc;gBAE3B,qBACI,8OAAC;8BACG,cAAA,8OAAC,yHAAA,CAAA,OAAI;wBACD,MAAM;wBACN,uBAAuB;wBACvB,QAAQ,KAAK,EAAE;wBACf,SAAS;4BACL,SAAS,MAAM,GAAG,CAAA,GAAA,+HAAA,CAAA,wBAAqB,AAAD,EAAE,KAAK,EAAE;wBACnD;wBACA,WACI,8DACA,CAAC,YAAY,2BAA2B,6CAA6C;wBAEzF,gBAAc,YAAY,SAAS;wBACnC,OAAO,KAAK,KAAK;;4BAEhB,KAAK,IAAI,iBACN,8OAAC;gCAAK,eAAY;gCAAO,WAAW,GAAG,KAAK,IAAI,CAAC,qBAAqB,CAAC;;;;;uCACvE;0CACJ,8OAAC;0CAAM;;;;;;4BACN,0BACG,8OAAC;gCAAK,WAAU;0CAAwD;;;;;uCACxE;;;;;;;mBArBH,KAAK,EAAE;;;;;YAyBxB;;;;;;;;;;;AAIhB","debugId":null}}]
}