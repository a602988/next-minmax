{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/linchian/Documents/GitHub/next-minmax/src/features/language/components/LanguageSwitcher.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter, usePathname, useSearchParams } from 'next/navigation';\nimport type { Language } from '@/types/language';\n\ntype LanguageSwitcherProps = {\n    className?: string;\n    languages: Language[];\n};\n\nexport default function LanguageSwitcher({ className, languages }: LanguageSwitcherProps) {\n    const router = useRouter();\n    const pathname = usePathname() || '/';\n    const searchParams = useSearchParams();\n\n    const localeIds = React.useMemo(\n        () => new Set((languages ?? []).map((l) => l.id)),\n        [languages]\n    );\n\n    if (!languages || languages.length === 0) return null;\n\n    function buildNextPath(target: Language): string {\n        const raw = pathname;\n        const parts = raw.split('/').filter(Boolean);\n        const first = parts[0];\n        const hasLocalePrefix = !!first && localeIds.has(first);\n        const restPath = hasLocalePrefix ? `/${parts.slice(1).join('/')}` : raw;\n\n        const nextBase = target.default\n            ? restPath || '/'\n            : `/${target.id}${restPath === '/' ? '' : restPath}`;\n\n        const qs = searchParams?.toString();\n        return qs ? `${nextBase}?${qs}` : nextBase;\n    }\n\n    function selectLanguage(target: Language) {\n        document.cookie = `NEXT_LOCALE=${encodeURIComponent(\n            target.id\n        )}; path=/; max-age=${60 * 60 * 24 * 180}`;\n\n        const nextPath = buildNextPath(target);\n        router.push(nextPath, { scroll: false });\n    }\n\n    return (\n        <nav className={className} aria-label=\"Language switcher\">\n            <ul className=\"flex flex-wrap items-center gap-2\">\n                {languages.map((lang) => {\n                    const label = lang.native || lang.title;\n                    const isDefault = !!lang.default;\n\n                    return (\n                        <li key={lang.id}>\n                            <button\n                                type=\"button\"\n                                onClick={() => selectLanguage(lang)}\n                                className={\n                                    'inline-flex items-center gap-2 rounded px-3 py-1 text-sm ' +\n                                    (isDefault\n                                        ? 'bg-blue-600 text-white'\n                                        : 'bg-gray-100 text-gray-800 hover:bg-gray-200')\n                                }\n                                aria-current={isDefault ? 'true' : undefined}\n                                title={lang.title}\n                            >\n                                {lang.icon ? (\n                                    <span\n                                        aria-hidden=\"true\"\n                                        className={`${lang.icon} inline-block h-4 w-4`}\n                                    />\n                                ) : null}\n\n                                <span>{label}</span>\n\n                                {isDefault ? (\n                                    <span className=\"ml-1 rounded bg-blue-500/20 px-1.5 py-0.5 text-[10px]\">\n                    default\n                  </span>\n                                ) : null}\n                            </button>\n                        </li>\n                    );\n                })}\n            </ul>\n        </nav>\n    );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAWe,SAAS,iBAAiB,EAAE,SAAS,EAAE,SAAS,EAAyB;IACpF,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD,OAAO;IAClC,MAAM,eAAe,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IAEnC,MAAM,YAAY,qMAAA,CAAA,UAAK,CAAC,OAAO,CAC3B,IAAM,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE,IAC/C;QAAC;KAAU;IAGf,IAAI,CAAC,aAAa,UAAU,MAAM,KAAK,GAAG,OAAO;IAEjD,SAAS,cAAc,MAAgB;QACnC,MAAM,MAAM;QACZ,MAAM,QAAQ,IAAI,KAAK,CAAC,KAAK,MAAM,CAAC;QACpC,MAAM,QAAQ,KAAK,CAAC,EAAE;QACtB,MAAM,kBAAkB,CAAC,CAAC,SAAS,UAAU,GAAG,CAAC;QACjD,MAAM,WAAW,kBAAkB,CAAC,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG;QAEpE,MAAM,WAAW,OAAO,OAAO,GACzB,YAAY,MACZ,CAAC,CAAC,EAAE,OAAO,EAAE,GAAG,aAAa,MAAM,KAAK,UAAU;QAExD,MAAM,KAAK,cAAc;QACzB,OAAO,KAAK,GAAG,SAAS,CAAC,EAAE,IAAI,GAAG;IACtC;IAEA,SAAS,eAAe,MAAgB;QACpC,SAAS,MAAM,GAAG,CAAC,YAAY,EAAE,mBAC7B,OAAO,EAAE,EACX,kBAAkB,EAAE,KAAK,KAAK,KAAK,KAAK;QAE1C,MAAM,WAAW,cAAc;QAC/B,OAAO,IAAI,CAAC,UAAU;YAAE,QAAQ;QAAM;IAC1C;IAEA,qBACI,8OAAC;QAAI,WAAW;QAAW,cAAW;kBAClC,cAAA,8OAAC;YAAG,WAAU;sBACT,UAAU,GAAG,CAAC,CAAC;gBACZ,MAAM,QAAQ,KAAK,MAAM,IAAI,KAAK,KAAK;gBACvC,MAAM,YAAY,CAAC,CAAC,KAAK,OAAO;gBAEhC,qBACI,8OAAC;8BACG,cAAA,8OAAC;wBACG,MAAK;wBACL,SAAS,IAAM,eAAe;wBAC9B,WACI,8DACA,CAAC,YACK,2BACA,6CAA6C;wBAEvD,gBAAc,YAAY,SAAS;wBACnC,OAAO,KAAK,KAAK;;4BAEhB,KAAK,IAAI,iBACN,8OAAC;gCACG,eAAY;gCACZ,WAAW,GAAG,KAAK,IAAI,CAAC,qBAAqB,CAAC;;;;;uCAElD;0CAEJ,8OAAC;0CAAM;;;;;;4BAEN,0BACG,8OAAC;gCAAK,WAAU;0CAAwD;;;;;uCAGxE;;;;;;;mBA1BH,KAAK,EAAE;;;;;YA8BxB;;;;;;;;;;;AAIhB","debugId":null}}]
}