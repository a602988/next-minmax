{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/linchian/Documents/GitHub/next-minmax/src/i18n/locale-cookie.ts"],"sourcesContent":["// TypeScript\n// src/i18n/locale-cookie.ts\nexport const NEXT_LOCALE_COOKIE = {\n    NAME: 'NEXT_LOCALE',\n    PATH: '/',\n    MAX_AGE_SECONDS: 60 * 60 * 24 * 180, // 180 天；與資料快取 TTL 無關\n    SAME_SITE: 'Lax' as const,\n    // 在 HTTPS 環境建議設為 true；本地可視情況調整\n    SECURE: typeof window !== 'undefined' ? window.location.protocol === 'https:' : true,\n};\n\nexport function buildNextLocaleCookie(value: string): string {\n    const parts = [\n        `${NEXT_LOCALE_COOKIE.NAME}=${encodeURIComponent(value)}`,\n        `Path=${NEXT_LOCALE_COOKIE.PATH}`,\n        `Max-Age=${NEXT_LOCALE_COOKIE.MAX_AGE_SECONDS}`,\n        `SameSite=${NEXT_LOCALE_COOKIE.SAME_SITE}`,\n    ];\n    if (NEXT_LOCALE_COOKIE.SECURE) parts.push('Secure');\n    return parts.join('; ');\n}"],"names":[],"mappings":"AAAA,aAAa;AACb,4BAA4B;;;;;AACrB,MAAM,qBAAqB;IAC9B,MAAM;IACN,MAAM;IACN,iBAAiB,KAAK,KAAK,KAAK;IAChC,WAAW;IACX,+BAA+B;IAC/B,QAAQ,sCAAgC,0BAAwC;AACpF;AAEO,SAAS,sBAAsB,KAAa;IAC/C,MAAM,QAAQ;QACV,GAAG,mBAAmB,IAAI,CAAC,CAAC,EAAE,mBAAmB,QAAQ;QACzD,CAAC,KAAK,EAAE,mBAAmB,IAAI,EAAE;QACjC,CAAC,QAAQ,EAAE,mBAAmB,eAAe,EAAE;QAC/C,CAAC,SAAS,EAAE,mBAAmB,SAAS,EAAE;KAC7C;IACD,IAAI,mBAAmB,MAAM,EAAE,MAAM,IAAI,CAAC;IAC1C,OAAO,MAAM,IAAI,CAAC;AACtB","debugId":null}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///Users/linchian/Documents/GitHub/next-minmax/src/features/language/components/LanguageSwitcher.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter, usePathname, useSearchParams } from 'next/navigation';\nimport type { Language } from '@/types/language';\nimport { buildNextLocaleCookie } from '@/i18n/locale-cookie';\n\ntype LanguageSwitcherProps = {\n    className?: string;\n    languages: Language[];\n};\n\nexport default function LanguageSwitcher({ className, languages }: LanguageSwitcherProps) {\n    const router = useRouter();\n    const pathname = usePathname() || '/';\n    const searchParams = useSearchParams();\n\n    const localeIds = React.useMemo(\n        () => new Set((languages ?? []).map((l) => l.id)),\n        [languages]\n    );\n\n    if (!languages || languages.length === 0) return null;\n\n    function buildNextPath(target: Language): string {\n        const raw = pathname;\n        const parts = raw.split('/').filter(Boolean);\n        const first = parts[0];\n        const hasLocalePrefix = !!first && localeIds.has(first);\n        const restPath = hasLocalePrefix ? `/${parts.slice(1).join('/')}` : raw;\n\n        const nextBase = (target as any).default\n            ? restPath || '/'\n            : `/${target.id}${restPath === '/' ? '' : restPath}`;\n\n        const qs = searchParams?.toString();\n        return qs ? `${nextBase}?${qs}` : nextBase;\n    }\n\n    function selectLanguage(target: Language) {\n        // 使用集中設定生成 Cookie 字串\n        document.cookie = buildNextLocaleCookie(target.id);\n\n        const nextPath = buildNextPath(target);\n        router.push(nextPath, { scroll: false });\n    }\n\n    return (\n        <nav className={className} aria-label=\"Language switcher\">\n            <ul className=\"flex flex-wrap items-center gap-2\">\n                {languages.map((lang) => {\n                    const label = (lang as any).native || lang.title;\n                    const isDefault = !!(lang as any).default;\n\n                    return (\n                        <li key={lang.id}>\n                            <button\n                                type=\"button\"\n                                onClick={() => selectLanguage(lang)}\n                                className={\n                                    'inline-flex items-center gap-2 rounded px-3 py-1 text-sm ' +\n                                    (isDefault\n                                        ? 'bg-blue-600 text-white'\n                                        : 'bg-gray-100 text-gray-800 hover:bg-gray-200')\n                                }\n                                aria-current={isDefault ? 'true' : undefined}\n                                title={lang.title}\n                            >\n                                {(lang as any).icon ? (\n                                    <span aria-hidden=\"true\" className={`${(lang as any).icon} inline-block h-4 w-4`} />\n                                ) : null}\n                                <span>{label}</span>\n                                {isDefault ? (\n                                    <span className=\"ml-1 rounded bg-blue-500/20 px-1.5 py-0.5 text-[10px]\">default</span>\n                                ) : null}\n                            </button>\n                        </li>\n                    );\n                })}\n            </ul>\n        </nav>\n    );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAYe,SAAS,iBAAiB,EAAE,SAAS,EAAE,SAAS,EAAyB;IACpF,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD,OAAO;IAClC,MAAM,eAAe,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IAEnC,MAAM,YAAY,qMAAA,CAAA,UAAK,CAAC,OAAO,CAC3B,IAAM,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE,IAC/C;QAAC;KAAU;IAGf,IAAI,CAAC,aAAa,UAAU,MAAM,KAAK,GAAG,OAAO;IAEjD,SAAS,cAAc,MAAgB;QACnC,MAAM,MAAM;QACZ,MAAM,QAAQ,IAAI,KAAK,CAAC,KAAK,MAAM,CAAC;QACpC,MAAM,QAAQ,KAAK,CAAC,EAAE;QACtB,MAAM,kBAAkB,CAAC,CAAC,SAAS,UAAU,GAAG,CAAC;QACjD,MAAM,WAAW,kBAAkB,CAAC,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG;QAEpE,MAAM,WAAW,AAAC,OAAe,OAAO,GAClC,YAAY,MACZ,CAAC,CAAC,EAAE,OAAO,EAAE,GAAG,aAAa,MAAM,KAAK,UAAU;QAExD,MAAM,KAAK,cAAc;QACzB,OAAO,KAAK,GAAG,SAAS,CAAC,EAAE,IAAI,GAAG;IACtC;IAEA,SAAS,eAAe,MAAgB;QACpC,qBAAqB;QACrB,SAAS,MAAM,GAAG,CAAA,GAAA,+HAAA,CAAA,wBAAqB,AAAD,EAAE,OAAO,EAAE;QAEjD,MAAM,WAAW,cAAc;QAC/B,OAAO,IAAI,CAAC,UAAU;YAAE,QAAQ;QAAM;IAC1C;IAEA,qBACI,8OAAC;QAAI,WAAW;QAAW,cAAW;kBAClC,cAAA,8OAAC;YAAG,WAAU;sBACT,UAAU,GAAG,CAAC,CAAC;gBACZ,MAAM,QAAQ,AAAC,KAAa,MAAM,IAAI,KAAK,KAAK;gBAChD,MAAM,YAAY,CAAC,CAAC,AAAC,KAAa,OAAO;gBAEzC,qBACI,8OAAC;8BACG,cAAA,8OAAC;wBACG,MAAK;wBACL,SAAS,IAAM,eAAe;wBAC9B,WACI,8DACA,CAAC,YACK,2BACA,6CAA6C;wBAEvD,gBAAc,YAAY,SAAS;wBACnC,OAAO,KAAK,KAAK;;4BAEf,KAAa,IAAI,iBACf,8OAAC;gCAAK,eAAY;gCAAO,WAAW,GAAG,AAAC,KAAa,IAAI,CAAC,qBAAqB,CAAC;;;;;uCAChF;0CACJ,8OAAC;0CAAM;;;;;;4BACN,0BACG,8OAAC;gCAAK,WAAU;0CAAwD;;;;;uCACxE;;;;;;;mBAnBH,KAAK,EAAE;;;;;YAuBxB;;;;;;;;;;;AAIhB","debugId":null}}]
}