{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/linchian/Documents/GitHub/next-minmax/src/features/language/components/LanguageProvider.tsx"],"sourcesContent":["// src/features/language/presentation/LanguageProvider.tsx\n'use client';\n\nimport React, { createContext, useContext } from 'react';\nimport type { Language } from '@/types';\n\ntype LanguageContextValue = {\n    languages: Language[];\n};\n\nconst LanguageContext = createContext<LanguageContextValue | null>(null);\n\nexport function LanguageProvider(props: { languages: Language[]; children: React.ReactNode }) {\n    return (\n        <LanguageContext.Provider value={{ languages: props.languages }}>\n            {props.children}\n        </LanguageContext.Provider>\n    );\n}\n\nexport function useLanguageContext(): LanguageContextValue {\n    const ctx = useContext(LanguageContext);\n    if (!ctx) {\n        throw new Error('useLanguageContext must be used within LanguageProvider');\n    }\n    return ctx;\n}"],"names":[],"mappings":"AAAA,0DAA0D;;;;;;AAG1D;AAFA;;;AASA,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAA+B;AAE5D,SAAS,iBAAiB,KAA2D;IACxF,qBACI,8OAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAE,WAAW,MAAM,SAAS;QAAC;kBACzD,MAAM,QAAQ;;;;;;AAG3B;AAEO,SAAS;IACZ,MAAM,MAAM,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IACvB,IAAI,CAAC,KAAK;QACN,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX","debugId":null}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///Users/linchian/Documents/GitHub/next-minmax/src/features/language/hooks/useLanguages.ts"],"sourcesContent":["// src/features/language/presentation/hooks/useLanguages.ts\n'use client';\n\nimport type { Language } from '@/types';\nimport { useLanguageContext } from '../components/LanguageProvider';\n\nexport function useLanguages(): Language[] {\n    return useLanguageContext().languages;\n}"],"names":[],"mappings":"AAAA,2DAA2D;;;;AAI3D;AAHA;;AAKO,SAAS;IACZ,OAAO,CAAA,GAAA,8JAAA,CAAA,qBAAkB,AAAD,IAAI,SAAS;AACzC","debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///Users/linchian/Documents/GitHub/next-minmax/src/features/language/components/LanguageSwitcher.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter, usePathname, useSearchParams } from 'next/navigation';\nimport type { Language } from '@/types/language';\nimport { useLanguages } from '../hooks/useLanguages';\n\ntype LanguageSwitcherProps = {\n    className?: string;\n};\n\nexport default function LanguageSwitcher({ className }: LanguageSwitcherProps) {\n    const languages = useLanguages();\n    const router = useRouter();\n    const pathname = usePathname() || '/';\n    const searchParams = useSearchParams();\n\n    // 重要：所有 Hook 都要在頂層呼叫，不要放在 early return 之後\n    const localeIds = React.useMemo(\n        () => new Set((languages ?? []).map((l) => l.id)),\n        [languages]\n    );\n\n    // 這裡才做 early return（不會再呼叫任何 Hook）\n    if (!languages || languages.length === 0) return null;\n\n    function buildNextPath(target: Language): string {\n        const raw = pathname;\n        const parts = raw.split('/').filter(Boolean);\n        const first = parts[0];\n        const hasLocalePrefix = !!first && localeIds.has(first);\n        const restPath = hasLocalePrefix ? `/${parts.slice(1).join('/')}` : raw;\n\n        const nextBase = target.default\n            ? restPath || '/'\n            : `/${target.id}${restPath === '/' ? '' : restPath}`;\n\n        const qs = searchParams?.toString();\n        return qs ? `${nextBase}?${qs}` : nextBase;\n    }\n\n    function selectLanguage(target: Language) {\n        document.cookie = `NEXT_LOCALE=${encodeURIComponent(\n            target.id\n        )}; path=/; max-age=${60 * 60 * 24 * 180}`;\n\n        const nextPath = buildNextPath(target);\n        router.push(nextPath, { scroll: false });\n    }\n\n    return (\n        <nav className={className} aria-label=\"Language switcher\">\n            <ul className=\"flex flex-wrap items-center gap-2\">\n                {languages.map((lang) => {\n                    const label = lang.native || lang.title;\n                    const isDefault = !!lang.default;\n\n                    return (\n                        <li key={lang.id}>\n                            <button\n                                type=\"button\"\n                                onClick={() => selectLanguage(lang)}\n                                className={\n                                    'inline-flex items-center gap-2 rounded px-3 py-1 text-sm ' +\n                                    (isDefault\n                                        ? 'bg-blue-600 text-white'\n                                        : 'bg-gray-100 text-gray-800 hover:bg-gray-200')\n                                }\n                                aria-current={isDefault ? 'true' : undefined}\n                                title={lang.title}\n                            >\n                                {/* icon 是樣式類名，作為裝飾性元素 */}\n                                {lang.icon ? (\n                                    <span\n                                        aria-hidden=\"true\"\n                                        className={`${lang.icon} inline-block h-4 w-4`}\n                                    />\n                                ) : null}\n\n                                <span>{label}</span>\n\n                                {isDefault ? (\n                                    <span className=\"ml-1 rounded bg-blue-500/20 px-1.5 py-0.5 text-[10px]\">\n                    default\n                  </span>\n                                ) : null}\n                            </button>\n                        </li>\n                    );\n                })}\n            </ul>\n        </nav>\n    );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAWe,SAAS,iBAAiB,EAAE,SAAS,EAAyB;IACzE,MAAM,YAAY,CAAA,GAAA,oJAAA,CAAA,eAAY,AAAD;IAC7B,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD,OAAO;IAClC,MAAM,eAAe,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IAEnC,0CAA0C;IAC1C,MAAM,YAAY,qMAAA,CAAA,UAAK,CAAC,OAAO,CAC3B,IAAM,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE,IAC/C;QAAC;KAAU;IAGf,kCAAkC;IAClC,IAAI,CAAC,aAAa,UAAU,MAAM,KAAK,GAAG,OAAO;IAEjD,SAAS,cAAc,MAAgB;QACnC,MAAM,MAAM;QACZ,MAAM,QAAQ,IAAI,KAAK,CAAC,KAAK,MAAM,CAAC;QACpC,MAAM,QAAQ,KAAK,CAAC,EAAE;QACtB,MAAM,kBAAkB,CAAC,CAAC,SAAS,UAAU,GAAG,CAAC;QACjD,MAAM,WAAW,kBAAkB,CAAC,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG;QAEpE,MAAM,WAAW,OAAO,OAAO,GACzB,YAAY,MACZ,CAAC,CAAC,EAAE,OAAO,EAAE,GAAG,aAAa,MAAM,KAAK,UAAU;QAExD,MAAM,KAAK,cAAc;QACzB,OAAO,KAAK,GAAG,SAAS,CAAC,EAAE,IAAI,GAAG;IACtC;IAEA,SAAS,eAAe,MAAgB;QACpC,SAAS,MAAM,GAAG,CAAC,YAAY,EAAE,mBAC7B,OAAO,EAAE,EACX,kBAAkB,EAAE,KAAK,KAAK,KAAK,KAAK;QAE1C,MAAM,WAAW,cAAc;QAC/B,OAAO,IAAI,CAAC,UAAU;YAAE,QAAQ;QAAM;IAC1C;IAEA,qBACI,8OAAC;QAAI,WAAW;QAAW,cAAW;kBAClC,cAAA,8OAAC;YAAG,WAAU;sBACT,UAAU,GAAG,CAAC,CAAC;gBACZ,MAAM,QAAQ,KAAK,MAAM,IAAI,KAAK,KAAK;gBACvC,MAAM,YAAY,CAAC,CAAC,KAAK,OAAO;gBAEhC,qBACI,8OAAC;8BACG,cAAA,8OAAC;wBACG,MAAK;wBACL,SAAS,IAAM,eAAe;wBAC9B,WACI,8DACA,CAAC,YACK,2BACA,6CAA6C;wBAEvD,gBAAc,YAAY,SAAS;wBACnC,OAAO,KAAK,KAAK;;4BAGhB,KAAK,IAAI,iBACN,8OAAC;gCACG,eAAY;gCACZ,WAAW,GAAG,KAAK,IAAI,CAAC,qBAAqB,CAAC;;;;;uCAElD;0CAEJ,8OAAC;0CAAM;;;;;;4BAEN,0BACG,8OAAC;gCAAK,WAAU;0CAAwD;;;;;uCAGxE;;;;;;;mBA3BH,KAAK,EAAE;;;;;YA+BxB;;;;;;;;;;;AAIhB","debugId":null}}]
}