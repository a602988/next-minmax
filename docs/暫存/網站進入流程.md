✅ 網頁進入流程

1️⃣ 國家站點判斷與重定向
* **目的：根據使用者的 IP 地址 判斷其所在國家，並依據網站配置，決定是否將其自動導向對應的國家不同站點網址(http://tw.網址.com)，或者僅將國家資訊提供給前端介面使用。
* **核心資訊來源：**
  * **使用者 IP 地址：** 優先透過 **CDN/邊緣運算平台**（如 Cloudflare、Vercel Edge Functions）在 HTTP 請求頭中提供的地理位置資訊（例如 x-vercel-ip-country）獲取。如果沒有，則使用**伺服器端快取**的 IP 地理定位服務（如 MaxMind GeoLite2）將 IP 轉換為國家代碼。
  * **後台預先配置的「國家-站點映射表」：** 這是一個**靜態配置**，由管理者定義，說明每個國家應該對應到哪個網站路徑前綴（例如：{ "TW": "/tw", "US": "/us", "JP": "/jp" }）。這個資訊是**固定**的，不需要透過 API 動態取得。
  * **功能啟用開關：** 在網站配置中，明確設定是否啟用 IP 地理位置的取得將國家資訊回傳給前端介面使用，以及是否需要自動導向功能。
* **判斷與處理邏輯：**
  * 啟用判斷： 首先檢查網站配置中是否啟用了基於 IP 的地理位置判斷功能。如果未啟用，則跳過此步驟的所有 IP 相關判斷和重定向邏輯，直接進入後續流程。
  * 獲取國家代碼： 如果功能啟用，則獲取使用者的國家代碼。如果無法獲取國家代碼 (例如 IP 無效或查詢失敗)，國家資訊仍可能被設為 null 或預設值。

2️⃣ 語系資料 API 呼叫（只在初次或 Cookie 過期時）
* 條件： 若無語系 Cookie 或語系版本過期
* API： /api/ssr/languages?project=minmax2025&language=[預設語系]
* 語系判斷優先順序：
    1. 瀏覽器語言偏好 (Accept-Language header)
    2. 地理位置推薦語系 (基於步驟 1 的國家代碼)
    3. 系統預設語系 (zh-TW)
* 回傳：
    * 可用語系清單
    * 預設語系

3️⃣ Cookie 檢查與語系設定
* 步驟：
    1. 讀取語系 Cookie
    2. 若無或版本過期 → 呼叫步驟 2 的語系 API
    3. 將語系資料與版本寫入 Set-Cookie

4️⃣ 解析網址語系與 API 參數組裝
* 取得語系方式：
    1. 從 URL /zh-TW/... 判斷語系（語系前綴）
    2. 若無 → 用語系 Cookie → 再無 → 用預設語系
* API 組參數：language = [當前語系]
* uri 
    * 如果 URL 有匹配到國家/語系前綴格式，才移除對應的前綴部分
    * 如果沒有匹配到，則保持原始路徑不變

* 語系切換建議：若語系 ≠ 使用者偏好語系(有匹配到語系資料) → 顯示「建議切換到 XX 語系」

5️⃣ 呼叫內容 API 與錯誤處理
* 內容 API： /api/ssr/page/detail?project=minmax2025&language=[語系]&uri=[路徑]

* 回傳處理：
    * 若有資料 → 渲染
    * 若無資料或錯誤 → 回傳 { notFound: true } → 顯示 404
